{
    "contents" : "# nullModel.R\n\n# Analysis on data collected on two plant species, Phalaris\n# arundinacea and Carex stricta.  The plants were grown in a growth chamber \n# under different soil nitrogen conditions (high, medium, low) and well as diff\n# temperature regimes (32/21 C & 25/18 C) and two photoperiods (14 h & 10h)\n# data was collected using a Li-6400 photosynthetsis machine to get data on\n# A/Ci and light response curves as well as leaf trait data like leaf N and SLA\n\n\n# The goal of the model selection is determine which of soil nitrogen, air\n# tempature, photoperiod or any combionation of the 3 most impact\n# photosynthetic processes. This will be used to potentially explain how each\n# species is influenced by their environmental changes (postivily or\n# negatively)\n\n# Main Question:  Will changes in soil N overcome issues with increased temp w/\n# climate change?\n\n# Secondary hypothesis:  Since we now know that temperature and soil N affect\n# CO2 assimilation, how are the different components affected?\n# Expected a priori: Carboxylation affected by N, e- transport by photoperiod\n# and temperture will afectt both carboxylation and e- transport\n\n\n# set directory to /data in the github repo\n\nlibrary(nlme)\nlibrary(ade4)\nlibrary(xtable)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(plyr)\nlibrary(AICcmodavg)\n\nallData <- read.csv(\"GCdata_2.csv\")\n\n\n# calculate CN ratio plus species subsets\n\n\nallData$CN <- allData$Carbon / allData$Nitrogen\n# Setting up independent variables as factors\nallData$photoperiodf <- factor(allData$phoper,\n                               labels = c(\"10 h\", \"14 h\"))\nallData$tempf <- factor(allData$temp,\n                        labels=c(\"25/18 °C\", \"32/21 °C\"))\nallData$species <- factor(allData$spp,\n                          labels=c(\"C. stricta\", \"P. arundinacea\"))\n\n# transformations for skewed data\nallData$SLA<-log10(allData$SLA)\nallData$vcmax<-log10(allData$vcmax)\nallData$jmax<-log10(allData$jmax)\nallData$Nitrogen<-log10(allData$Nitrogen)\nallData$CN<-log10(allData$CN)\n\n# dark respration should be postive\n\nallData$dr <- allData$dr *-1\n\n\n\n# calculate correlation coeffiencts\n\ngcPCA1 <- allData[,c(7:14,18:24)]\n\ncorMat <- cor(gcPCA1)\n\n\n\n# pca on all\nall<-dudi.pca(corMat, scale=T, scannf=F, nf=3)\nscatter(all)\ns.label(all$co, boxes=F)\nall$eig\n\n\n# make table of loadings for ms\n\nl.table <- xtable(all$co)\nprint(l.table, type=\"html\", file=\"loadings.html\")\n\nwrite.csv(all$co,\"loadings.csv\")\n# how corrlated are loadings\n\nloadings <- cor(all$co)\n\n# based off the tight correlations of multiple varibles, we have chosen 6\n# varibles to measure based off the top 3 axis\n# analyzing Aamb, DR, CN, jmax, CO2 sat, and Ce as they were major drivers\n# in the PCA axis. Except DR which is being included for biological sig\n\naamb<-lme(aamb ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n           species:tempf+species:photoperiodf+nTreatment:tempf+\n           nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n         data=allData)\nanova(aamb)\n\n\n\ndr2<-lme(dr ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n           species:tempf+species:photoperiodf+nTreatment:tempf+\n           nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n         data=allData)\n\nanova(dr2)\n\nSLA<-lme(SLA ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n           species:tempf+species:photoperiodf+nTreatment:tempf+\n           nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n         data=allData)\n\nanova(SLA)\n\nce<-lme(ce ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n          species:tempf+species:photoperiodf+nTreatment:tempf+\n          nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n        data=allData)\nanova(ce)\n\n\n# not using\n# correlates with aamb\nnitrogen<-lme(Nitrogen ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n                species:tempf+species:photoperiodf+nTreatment:tempf+\n                nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n              data=allData)\nanova(nitrogen)\n\namax<-lme(amax ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n            species:tempf+species:photoperiodf+nTreatment:tempf+\n            nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n          data=allData)\nanova(amax)\n\nvcmax<-lme(vcmax ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n            species:tempf+species:photoperiodf+nTreatment:tempf+\n            nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n          data=allData)\nanova(vcmax)\n\n\n \n\nCN<-lme(CN ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n          species:tempf+species:photoperiodf+nTreatment:tempf+\n          nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n        data=allData)\nanova(CN)\n\n\n# correlates with SLA\nPNUE<-lme(pnue ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n            species:tempf+species:photoperiodf+nTreatment:tempf+\n            nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n          data=allData)\nanova(PNUE)\n\n#Correlates with DR\n\nC13<-lme(D13C ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n            species:tempf+species:photoperiodf+nTreatment:tempf+\n            nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n          data=allData)\n\nanova(C13)\n\nco2sat<-lme(co2sat ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n              species:tempf+species:photoperiodf+nTreatment:tempf+\n              nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n            data=allData)\nanova(co2sat)\n\ncarbon<-lme(Carbon ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n              species:tempf+species:photoperiodf+nTreatment:tempf+\n              nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n            data=allData)\nanova(carbon)\n\n# correlates with CE\n\nnetqe<-lme(netqe ~ species+nTreatment+tempf+photoperiodf+species:nTreatment+\n             species:tempf+species:photoperiodf+nTreatment:tempf+\n             nTreatment:photoperiodf+tempf:photoperiodf, random =~1|plant_id,\n           data=allData)\nanova(netqe)\n\n\n\n#############################################################################\n##### Below is a playground of data exploration currently please ignore######\n#############################################################################\n\n# table of clean data\n\nAvg<-ddply(allDataClean, .(species, nTreatment, tempf, photoperiodf),\n           summarize,\n           Aamb=mean(aamb),\n           Aamb_sd=sd(aamb),\n           Amax=mean(amax),\n           Amax_sd=sd(amax),\n           C=mean(Carbon),\n           C_sd=sd(Carbon),\n           CE=mean(ce),\n           CE_sd=sd(ce),\n           C.N=mean(CN),\n           C.N_sd=sd(CN),\n           DR=mean(dr),\n           DR_sd=sd(dr),\n           Jmax=mean(jmax),\n           Jmax_sd=sd(jmax),\n           N=mean(Nitrogen),\n           N_sd=sd(Nitrogen),\n           Net_QE=mean(netqe),\n           Net_QE_sd=sd(netqe),\n           PNUE=mean(pnue),\n           PNUE_sd=sd(pnue),\n           SLA.=mean(SLA),\n           SLA_sd=sd(SLA),\n           Vcmax=mean(vcmax),\n           Vcmax_sd=sd(vcmax)\n           )\n\nwrite.csv(Avg, \"avgFileAll.csv\")\navgtab<-xtable(Avg)\nprint(avgtab, type=\"html\",file=\"avgTableAll.html\")\n\n# ratios\nallData$ratio <- allData$jmax/allData$vcmax\nggplot(allData, aes(species, ratio, color=tempf, fill=order)) +\n  geom_boxplot()+\n  scale_color_manual(values=c(\"black\",\"gray90\"))+\n  scale_fill_discrete(name=\"N Treatment\",labels=c(\"Low\",\"Med\", \"High\"))+\n  themeopts\n  \n# doing model secltion on the traits that make up aamb (vcmax, jmax, leaf N,\n# ce (?))\n\nmodnames <- c(\"treatment\",\"temperature\",\"photoperiod\",\"treatmentXtemperature\",\n              \"treatmentXphotoperiod\", \"photoperiodXtemperature\")\n, \"species\",\n              \"speciesXtemperature\", \"speciesXtreatment\", \"speciesXphotoperiod\")\n\n\ncand.modvcmax<-list()\ncand.modvcmax[[1]] <- lme(vcmax ~ nTreatment,\n                       random=~1|plant_id,method=\"ML\", data=allData)\ncand.modvcmax[[2]] <- lme(vcmax ~ tempf,\n                       random=~1|plant_id,method=\"ML\", data=allData)\ncand.modvcmax[[3]] <- lme(vcmax ~ photoperiodf,\n                       random=~1|plant_id,method=\"ML\", data=allData)\ncand.modvcmax[[4]] <- lme(vcmax ~ nTreatment*tempf,\n                       random=~1|plant_id,method=\"ML\", data=allData)\ncand.modvcmax[[5]] <- lme(vcmax ~ nTreatment*photoperiodf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modvcmax[[6]] <- lme(vcmax ~ photoperiodf*tempf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\n\naictab(cand.modvcmax, modnames)\nevidence(aictab(cand.modvcmax, modnames))\nvcmax<-xtable(aictab(cand.modvcmax, modnames))\nprint(vcmax, type=\"html\", file=\"AICcvcmax.html\")\n\n\ncand.modjmax<-list()\ncand.modjmax[[1]] <- lme(jmax ~ nTreatment,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modjmax[[2]] <- lme(jmax ~ tempf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modjmax[[3]] <- lme(jmax ~ photoperiodf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modjmax[[4]] <- lme(jmax ~ nTreatment*tempf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modjmax[[5]] <- lme(jmax ~ nTreatment*photoperiodf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\ncand.modjmax[[6]] <- lme(jmax ~ photoperiodf*tempf,\n                          random=~1|plant_id,method=\"ML\", data=allData)\n\naictab(cand.modjmax, modnames)\nevidence(aictab(cand.modjmax, modnames))\njmax<-xtable(aictab(cand.modjmax, modnames))\nprint(jmax, type=\"html\", file=\"AICcjmax.html\")",
    "created" : 1444846918290.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3496533177",
    "id" : "31A7BC9",
    "lastKnownWriteTime" : 1443729732,
    "path" : "~/GitHub/growthChamber/growthChamber/scripts/nullModel.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}