{
    "contents" : "# Figure making for Waring and Holaday growth chamber experiment\nlibrary(xtable)\nlibrary(ggplot2)\nlibrary(plyr)\nlibrary(cowplot)  # making labeled grids of ggplot figs.  For future\n\n\n# figures\n\ntextsize <- 18\nthemeopts <- theme( axis.title.y = element_text(size = textsize, \n                                                angle = 90,vjust=0.3) ,\n                    axis.title.x = element_text(size = textsize,\n                                                vjust=-0.3),\n                    panel.background = element_blank(), \n                    panel.border = element_rect(fill=NA), \n                    axis.text.x = element_text(size=16,color = \"black\"),\n                    axis.text.y = element_text(size=16, color = \"black\"),\n                    legend.title = element_text(size = 16),\n                    legend.text = element_text(size = 16), \n                    strip.text.x = element_text(size = textsize), \n                    strip.text.y = element_text(size = textsize), \n                    strip.background = element_blank(),\n                    legend.background=element_blank(),\n                    legend.key = element_rect(fill = \"white\"))\n# Multiple plot function\n#\n# ggplot objects can be passed in ..., or to plotlist (as a list of ggplot objects)\n# - cols:   Number of columns in layout\n# - layout: A matrix specifying the layout. If present, 'cols' is ignored.\n#\n# If the layout is something like matrix(c(1,2,3,3), nrow=2, byrow=TRUE),\n# then plot 1 will go in the upper left, 2 will go in the upper right, and\n# 3 will go all the way across the bottom.\n#\nmultiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {\n  require(grid)\n  \n  # Make a list from the ... arguments and plotlist\n  plots <- c(list(...), plotlist)\n  \n  numPlots = length(plots)\n  \n  # If layout is NULL, then use 'cols' to determine layout\n  if (is.null(layout)) {\n    # Make the panel\n    # ncol: Number of columns of plots\n    # nrow: Number of rows needed, calculated from # of cols\n    layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),\n                     ncol = cols, nrow = ceiling(numPlots/cols))\n  }\n  \n  if (numPlots==1) {\n    print(plots[[1]])\n    \n  } else {\n    # Set up the page\n    grid.newpage()\n    pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))\n    \n    # Make each plot, in the correct location\n    for (i in 1:numPlots) {\n      # Get the i,j matrix positions of the regions that contain this subplot\n      matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))\n      \n      print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,\n                                      layout.pos.col = matchidx$col))\n    }\n  }\n}\n\n\n\n# making curves for figures 1 \nACI<-read.csv(\"allACI.csv\")\n\no<-c(\"a\",\"b\",\"c\")\nt<-c(\"low\",\"med\",\"high\")\norder2<-data.frame(order=o,nTreatment=t)\n\n\n\nACI<-merge(ACI, order2, by=\"nTreatment\")\n\n\n\n#ACI curve\n\nACIavg <- ddply(ACI, .(spp, nTreatment, temp, phoper, point, order), summarize,\n                photo_sd=sd(photo),\n                photo=mean(photo),\n                ci_sd=sd(ci),\n                ci=mean(ci))\n\nACIavg$ci <- ACIavg$ci/10\nACIavg$ci_Sd <- ACIavg$ci_sd/10\n\nACIavg$phoperf <- factor(ACIavg$phoper, \n                         labels = c(\"10 h\", \"14 h\"))\nACIavg$tempf<-factor(ACIavg$temp,\n                     labels=c(\"25/18 °C\", \"32/21 °C\"))\n\nACIavg$sppf<-factor(ACIavg$spp,\n                    labels=c(\"C. stricta\", \"P. arundinacea\"))\n\nACIavg=na.omit(ACIavg)\n\nggplot(ACIavg, aes(ci, photo, shape=order, linetype=sppf,\n                             color=sppf)) +\n  geom_pointrange(aes(ymin=photo-photo_sd, ymax=photo+photo_sd,\n                      xmin=ci-ci_sd, xmax=ci+ci_sd), size=0.5) +\n  geom_line(size=0.5) +\n  xlim(-5,200) +\n  ylim(-5,30)+\n  labs(x=expression(paste(italic(pCO[2]),(Pa))))+\n  labs(y=expression(paste(italic(A),\" (\", mu * mol %.% m^{-2} %.% s^{-1}, \")\")))+\n  scale_color_manual(name=\"Species\",\n                     values = c(\"black\", \"gray50\")) +\n  facet_grid(phoperf~tempf) +\n  themeopts  +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \n\nggsave(\"WaringandHoladay-fig1.pdf\")\n\n\n\n\n\n\n# Individual varibles\n\n# for figure making\nallData<-read.csv(\"GCdata_2.csv\")\nallData<-merge(allData, order2, by=\"nTreatment\")\nallData$dr <-allData$dr*-1\n\n\n\n#### Figure changes from sept 8th meeting\n\n\n\nallDataM <- ddply(allData, .(tempf, order, photoperiodf, species, nTreatment), \n                  summarize,\n                  aambSD =sd(aamb),\n                  aamb=mean(aamb),\n                  ceSD =sd(ce),\n                  ce=mean(ce),\n                  drSD=sd(dr),\n                  dr=mean(dr),\n                  netqeSD=sd(netqe),\n                  netqe=mean(netqe),\n                  PNUESD=sd(pnue),\n                  PNUE=mean(pnue),\n                  slaSD=sd(SLA),\n                  SLA=mean(SLA),\n                  jSD=sd(jmax),\n                  j=mean(jmax),\n                  vcSD=sd(vcmax),\n                  vc=mean(vcmax),\n                  Nsd=sd(Nitrogen),\n                  N=mean(Nitrogen))\n\n# Aamb\n\nggplot(allDataM, aes(tempf, aamb, shape=order, fill=factor(order),\n                    linetype=order))+\n  geom_pointrange(aes(ymin=aamb-aambSD, ymax=aamb+aambSD),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(italic(A[amb]),\" (\", mu * mol %.% m^{-2} %.% s^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \n\nggsave(\"waring-and-holaday-figure-2.pdf\")\n\n\n\nggplot(allDataM, aes(tempf, dr, shape=order, linetype=order,\n                     fill=factor(order)))+\n  geom_pointrange(aes(ymin=dr-drSD, ymax=dr+drSD),\n                 position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(italic(R[d]),\" (\", mu * mol %.% m^{-2} %.% s^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \n\nggsave(\"waring-and-holaday-figure-3.pdf\")\n\n# net qe\n\n\n\nggplot(allDataM, aes(tempf, netqe, shape=order, linetype=order, \n                     fill=factor(order)))+\n  geom_pointrange(aes(ymin=netqe-netqeSD, ymax=netqe+netqeSD),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(\"Net qe\",\" (\", mu * mol %.% m^{-2} %.% s^{-1}%.% pfd^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\")\n\nggsave(\"waring-holday-figure-4.pdf\")\n\nggplot(allDataM, aes(tempf, N, shape=order, fill=factor(order),\n                     linetype=order))+\n  geom_pointrange(aes(ymin=N-Nsd, ymax=N+Nsd),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(\"Leaf N\",\" (\", cg %.% g^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \n\nggsave (\"waring-holday-figure-5.pdf\")\n\n\n# pnue\nggplot(allDataM, aes(tempf, PNUE, shape=order, linetype=order,\n                     fill=order))+\n  geom_pointrange(aes(ymin=PNUE-PNUESD, ymax=PNUE+PNUESD),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(PNUE[],\" (\", mu * mol %.% g^{-1} %.% s^{-1} , \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\")\n\nggsave(\"waring-and-holaday-figure6.pdf\")\n\n#  Figure 7\n\n\n# ce\n\n\n\nce <- ggplot(allDataM, aes(tempf, ce, shape=order,linetype=order,\n                     fill=factor(order))) +\n  geom_pointrange(aes(ymin=ce-ceSD, ymax=ce+ceSD),\n               position=position_dodge(width=0.5), size=1)+\n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  facet_grid(photoperiodf~species)+  \n  labs(y=expression(paste(CE[],\" (\", mu * mol %.% m^{-2} %.% s^{-1} %.% kPa^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\")\nggsave(\"waring-and-holaday-figure7.pdf\")\n\n# vcmax\n\nvc <- ggplot(allDataM, aes(tempf, vc, shape=order, fill=factor(order),\n                     linetype=order))+\n  geom_pointrange(aes(ymin=vc-vcSD, ymax=vc+vcSD),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(italic(V[cmax]),\" (\", mu * mol %.% m^{-2} %.% s^{-1}, \")\")))+\n  themeopts +\n  #annotate(\"text\", label = c(\"B\",\"C\",\"D\",\"F\"), x = 0.5, y = 98, size = 10) +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \nggsave(\"waring-and-holaday-figure8.pdf\")\n\n\n# jmax\njmax <- ggplot(allDataM, aes(tempf, j, shape=order, fill=factor(order),\n                     linetype=order))+\n  geom_pointrange(aes(ymin=j-jSD, ymax=j+jSD),\n                  position=position_dodge(width=0.5), size=1)+\n  facet_grid(photoperiodf~species)+  \n  scale_fill_manual(values=c(\"black\",NA,\"gray50\"))+\n  scale_shape_manual(values=c(21,22,23))+\n  scale_linetype_manual(values=c(1,2,3))+\n  labs(y=expression(paste(italic(J[max]),\" (\", mu * mol %.% m^{-2} %.% s^{-1}, \")\")))+\n  themeopts +\n  theme(strip.text.x = element_text(face = \"italic\")) +\n  scale_x_discrete(name=\"Temperature (°C)\") +\n  theme(legend.position=\"none\")+\n  panel_border(colour=\"black\") \nggsave(\"waring-and-holaday-figure9.pdf\")\n\n\npdf(\"WaringandHoladay-fig7.pdf\", height = 4, width = 15, useDingbats = F)\nmultiplot(ce, vc, jmax, cols=3)\ndev.off()\n",
    "created" : 1444846566027.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1684910354",
    "id" : "71064C45",
    "lastKnownWriteTime" : 1443814896,
    "path" : "~/GitHub/growthChamber/growthChamber/scripts/figureMaking.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}